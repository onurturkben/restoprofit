{% extends 'base.html' %}

{% block content %}

    <div class="container">
        <h1 class="mb-4">ğŸ§  Analiz MotorlarÄ±</h1>

        <div class="row">
            
            <div class="col-md-6">
                
                <div class="card mb-4">
                    <div class="card-header bg-info text-white">ğŸ§® Motor 1: Hedef Marj HesaplayÄ±cÄ±</div>
                    <div class="card-body">
                        <p>Bir Ã¼rÃ¼nÃ¼n maliyetine gÃ¶re, istediÄŸiniz kar marjÄ± iÃ§in gereken satÄ±ÅŸ fiyatÄ±nÄ± hesaplar.</p>
                        <form action="{{ url_for('reports') }}" method="POST">
                            <input type="hidden" name="analiz_tipi" value="hedef_marj">
                            <div class="mb-3">
                                <label for="urun_marj" class="form-label">ÃœrÃ¼n SeÃ§in:</label>
                                <select class="form-select" name="urun_ismi" id="urun_marj" required>
                                    {% for urun in urun_listesi %}<option value="{{ urun }}">{{ urun }}</option>{% endfor %}
                                </select>
                            </div>
                            <div class="mb-3">
                                <label for="hedef_marj" class="form-label">Hedef Kar MarjÄ± (%):</label>
                                <input type="number" class="form-control" name="hedef_marj" id="hedef_marj" value="70" step="1" min="1" max="99" required>
                            </div>
                            <button type="submit" class="btn btn-info">Hesapla (HÃ¼cre 9)</button>
                        </form>
                    </div>
                </div>

                <div class="card mb-4">
                    <div class="card-header bg-warning">ğŸ“ˆ Motor 2: Fiyat SimÃ¼latÃ¶rÃ¼</div>
                    <div class="card-body">
                        <p>"Ya... olursa?" analizi. Bir Ã¼rÃ¼nÃ¼n fiyatÄ±nÄ± deÄŸiÅŸtirirseniz tahmini karÄ±nÄ±zÄ±n ne olacaÄŸÄ±nÄ± sÃ¶yler.</p>
                        <form action="{{ url_for('reports') }}" method="POST">
                            <input type="hidden" name="analiz_tipi" value="simulasyon">
                            <div class="mb-3">
                                <label for="urun_sim" class="form-label">ÃœrÃ¼n SeÃ§in:</label>
                                <select class="form-select" name="urun_ismi" id="urun_sim" required>
                                    {% for urun in urun_listesi %}<option value="{{ urun }}">{{ urun }}</option>{% endfor %}
                                </select>
                            </div>
                            <div class="mb-3">
                                <label for="yeni_fiyat" class="form-label">Yeni SatÄ±ÅŸ FiyatÄ± (TL):</label>
                                <input type="number" class="form-control" name="yeni_fiyat" id="yeni_fiyat" value="300" step="1" min="1" required>
                            </div>
                            <button type="submit" class="btn btn-warning">SimÃ¼le Et (HÃ¼cre 7)</button>
                        </form>
                    </div>
                </div>

                <div class="card mb-4">
                    <div class="card-header bg-success text-white">ğŸ† Motor 3: Optimum Fiyat Motoru</div>
                    <div class="card-body">
                        <p>Bir Ã¼rÃ¼n iÃ§in "Maksimum Kar" getirecek optimum fiyatÄ±, geÃ§miÅŸ verilere gÃ¶re tahmin eder.</p>
                        <form action="{{ url_for('reports') }}" method="POST">
                            <input type="hidden" name="analiz_tipi" value="optimum_fiyat">
                            <div class="mb-3">
                                <label for="urun_opt" class="form-label">ÃœrÃ¼n SeÃ§in:</label>
                                <select class="form-select" name="urun_ismi" id="urun_opt" required>
                                    {% for urun in urun_listesi %}<option value="{{ urun }}">{{ urun }}</option>{% endfor %}
                                </select>
                            </div>
                            <button type="submit" class="btn btn-success">Optimum FiyatÄ± Bul (HÃ¼cre 8)</button>
                        </form>
                    </div>
                </div>
                
            </div> <div class="col-md-6">

                <div class="card mb-4">
                    <div class="card-header bg-danger text-white">ğŸ¯ Motor 4: Stratejist Asistan (Kategori)</div>
                    <div class="card-body">
                        <p>Kategori iÃ§i yamyamlÄ±ÄŸÄ± (cannibalization) tespit eder. (Ã–rn: Cheeseburger vs Steak Burger)</p>
                        <form action="{{ url_for('reports') }}" method="POST">
                            <input type="hidden" name="analiz_tipi" value="kategori">
                            <div class="mb-3">
                                <label for="kategori_isim" class="form-label">Kategori SeÃ§in:</label>
                                <select class="form-select" name="kategori_ismi" id="kategori_isim" required>
                                    {% for kat in kategori_listesi %}<option value="{{ kat }}">{{ kat }}</option>{% endfor %}
                                </select>
                            </div>
                            <div class="mb-3">
                                <label for="gun_kat" class="form-label">KarÅŸÄ±laÅŸtÄ±rma Periyodu (GÃ¼n):</label>
                                <input type="number" class="form-control" name="gun_sayisi" id="gun_kat" value="7" step="1" min="1" required>
                            </div>
                            <button type="submit" class="btn btn-danger">Analiz Et (HÃ¼cre 10)</button>
                        </form>
                    </div>
                </div>

                <div class="card mb-4">
                    <div class="card-header bg-primary text-white">ğŸ‘‘ Motor 5: Genel Stratejist (Grup)</div>
                    <div class="card-body">
                        <p>Ã‡apraz kategori yamyamlÄ±ÄŸÄ±nÄ± tespit eder. (Ã–rn: Burgerler vs Et Yemekleri). En rasyonel analizdir.</p>
                        <form action="{{ url_for('reports') }}" method="POST">
                            <input type="hidden" name="analiz_tipi" value="grup">
                            <div class="mb-3">
                                <label for="grup_isim" class="form-label">Kategori Grubu SeÃ§in:</label>
                                <select class="form-select" name="grup_ismi" id="grup_isim" required>
                                    {% for grup in grup_listesi %}<option value="{{ grup }}">{{ grup }}</option>{% endfor %}
                                </select>
                            </div>
                            <div class="mb-3">
                                <label for="gun_grup" class="form-label">KarÅŸÄ±laÅŸtÄ±rma Periyodu (GÃ¼n):</label>
                                <input type="number" class="form-control" name="gun_sayisi" id="gun_grup" value="7" step="1" min="1" required>
                            </div>
                            <button type="submit" class="btn btn-primary">Analiz Et (HÃ¼cre 11)</button>
                        </form>
                    </div>
                </div>

            </div> </div> <hr>

        <h2 class="mb-3">Analiz Sonucu</h2>
        
        {% if analiz_sonucu %}
            <pre>{{ analiz_sonucu }}</pre>
        {% else %}
            <div class="alert alert-secondary" role="alert">
                LÃ¼tfen yukarÄ±daki motorlardan birini Ã§alÄ±ÅŸtÄ±rÄ±n. Rapor sonucu burada gÃ¶rÃ¼necektir.
            </div>
        {% endif %}

    </div>

{% endblock %}
