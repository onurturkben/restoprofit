<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" rel="stylesheet">

  <!-- Poppins -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;700&display=swap" rel="stylesheet">

  <title>{{ title|default('RestoProfit') }} - RestoProfit</title>

  <style>
    :root{
      --rp-max: 1140px;          /* 1) container genişliği */
      --rp-space-1: 8px;         /* 8px spacing sistemi */
      --rp-space-2: 16px;
      --rp-space-3: 24px;
      --rp-space-4: 32px;
      --rp-space-6: 48px;
      --rp-space-8: 64px;
      --rp-muted:#6c757d;
      --rp-border:#e2e8f0;
      --rp-bg:#f7f9fb;
      --rp-card:#ffffff;
      --rp-ink:#212529;
    }

    html,body{height:100%}
    body{
      font-family:'Poppins',system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      color:var(--rp-ink);
      background:#f8f9fa;
      line-height:1.6;
    }

    /* NAV */
    .navbar{
      background:#fff;
      box-shadow:0 2px 4px rgba(0,0,0,.04);
      padding-block:12px;
    }
    .rp-container{ max-width: var(--rp-max); margin-inline:auto; }

    .navbar-brand img{
      height:36px;              /* logonun boyu */
      width:auto;
      display:block;
    }

    /* Ana içerik */
    main{ padding-block: var(--rp-space-6); }
    .section{ margin-bottom: var(--rp-space-8); }

    /* Kart */
    .rp-card{
      background:var(--rp-card);
      border:1px solid var(--rp-border);
      border-radius:12px;
      box-shadow: 0 4px 12px rgba(16,24,40,.06);
      padding: clamp(16px, 2.2vw, 32px);
    }

    /* Başlıklar */
    h1{ font-weight:700; font-size: clamp(28px, 3.2vw, 36px); margin-bottom:var(--rp-space-3); }
    h2{ font-weight:700; font-size: clamp(22px, 2.6vw, 28px); margin-bottom:var(--rp-space-2); }
    h3{ font-weight:500; font-size: clamp(18px, 2.2vw, 20px); margin-bottom:var(--rp-space-2); }
    .text-muted{ color:var(--rp-muted)!important; }

    /* Sonuç bloğu */
    .result-card{
      background:var(--rp-bg);
      border:1px solid var(--rp-border);
      border-radius:12px;
      padding: clamp(16px, 2vw, 24px);
    }
    .result-pre{
      margin:0;
      white-space:pre-wrap;     /* satır kaydırma */
      word-break:break-word;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
      font-size: 15px;
      line-height:1.7;
    }

    /* Form boşlukları */
    .form-group{ margin-bottom: var(--rp-space-3); }
    .form-actions{ margin-top: var(--rp-space-3); }

    /* Linkler */
    a{ text-decoration:none }
    a:hover{ text-decoration:underline }

    /* Mobil önce düzen */
    @media (min-width: 992px){
      .grid-2{ display:grid; grid-template-columns: 1fr 1fr; gap: var(--rp-space-4); }
      .grid-3{ display:grid; grid-template-columns: 1fr 1fr 1fr; gap: var(--rp-space-4); }
    }
  </style>

  {% block head %}{% endblock %}
</head>
<body class="d-flex flex-column min-vh-100">

  <nav class="navbar">
    <div class="container-fluid rp-container d-flex align-items-center">
      <!-- SADECE LOGO -->
      <a class="navbar-brand d-flex align-items-center" href="{{ url_for('dashboard') }}" aria-label="RestoProfit Ana Sayfa">
        <img src="{{ url_for('static', filename='images/restoprofit-logo.png') }}" alt="RestoProfit">
      </a>

      <button class="navbar-toggler ms-auto" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Menüyü aç/kapat">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item"><a class="nav-link {% if request.endpoint == 'dashboard' %}active{% endif %}" href="{{ url_for('dashboard') }}">Ana Ekran</a></li>
          <li class="nav-item"><a class="nav-link {% if request.endpoint == 'reports' %}active{% endif %}" href="{{ url_for('reports') }}">Analiz Motorları</a></li>
          <li class="nav-item"><a class="nav-link {% if request.endpoint == 'admin_panel' %}active{% endif %}" href="{{ url_for('admin_panel') }}">Menü Yönetimi</a></li>
          {% if current_user.is_authenticated %}
          <li class="nav-item dropdown ms-2">
            <a class="nav-link dropdown-toggle" href="#" data-bs-toggle="dropdown">{{ current_user.username }}</a>
            <ul class="dropdown-menu dropdown-menu-end">
              <li><a class="dropdown-item" href="{{ url_for('change_password') }}">Şifre Değiştir</a></li>
              <li><hr class="dropdown-divider"></li>
              <li><a class="dropdown-item text-danger" href="{{ url_for('logout') }}">Çıkış Yap</a></li>
            </ul>
          </li>
          {% else %}
          <li class="nav-item ms-2"><a class="nav-link" href="{{ url_for('login') }}">Giriş Yap</a></li>
          {% endif %}
        </ul>
      </div>
    </div>
  </nav>

  <main class="rp-container">
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, message in messages %}
        <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
          {{ message }}
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Kapat"></button>
        </div>
        {% endfor %}
      {% endif %}
    {% endwith %}

    {% block content %}{% endblock %}
  </main>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" defer></script>
  {% block scripts %}{% endblock %}
</body>
</html>
